package issue145

import (
	"testing"
)

//go:generate go run asm.go -out issue145.s -stubs stub.go

func TestShuffle(t *testing.T) {
	data := []byte{
		0x0, 0x1, 0x2, 0x3,
		0x4, 0x5, 0x6, 0x7,
		0x8, 0x9, 0xa, 0xb,
		0xc, 0xd, 0xe, 0xf,
	}
	mask := []byte{
		0xc, 0xd, 0xe, 0xf,
		0x8, 0x9, 0xa, 0xb,
		0x4, 0x5, 0x6, 0x7,
		0x0, 0x1, 0x2, 0x3,
	}
	expect := [4]uint32{
		0x0f0e0d0c,
		0x0b0a0908,
		0x07060504,
		0x03020100,
	}
	got := Shuffle(mask, data)
	if got != expect {
		t.Fail()
	}
}
